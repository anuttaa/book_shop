<!DOCTYPE html>
<html class="light" lang="ru">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>BookStore — Детали книги</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&amp;display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>

    <link rel="stylesheet" href="/css/main.css"/>
    <style>
        .material-symbols-outlined {
            font-variation-settings: 'FILL' 1, 'wght' 400, 'GRAD' 0, 'opsz' 24;
        }

        /* Дополнительные стили для книжных обложек */
        .book-cover-main {
            width: 280px;
            height: 420px;
            min-width: 280px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            transition: transform 0.3s ease;
        }

        .book-cover-main:hover {
            transform: translateY(-5px);
        }

        .book-cover-recommendation {
            width: 120px;
            height: 180px;
            transition: all 0.3s ease;
        }

        .book-cover-recommendation:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
        }

        /* Адаптивность для главной обложки */
        @media (max-width: 768px) {
            .book-cover-main {
                width: 200px;
                height: 300px;
                min-width: 200px;
            }
        }

        @media (max-width: 640px) {
            .book-cover-main {
                width: 150px;
                height: 225px;
                min-width: 150px;
            }
        }

        /* Улучшенный контейнер для рекомендаций */
        .recommendations-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 24px;
        }

        .recommendation-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            gap: 12px;
            padding: 16px;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.05);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .recommendation-card:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-5px);
        }
    </style>
</head>
<body class="bg-background-light text-text-light dark:bg-background-dark dark:text-text-dark">
<div class="relative flex h-auto min-h-screen w-full flex-col group/design-root overflow-x-hidden">

    <header class="header">
        <div class="actions">
            <a class="brand" href="/">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M5 21V3h14v18l-7-3-7 3zM7 5v12.2l5-2.15 5 2.15V5H7z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg>
                <h1>BookStore</h1>
            </a>
            <nav class="nav">
                <a href="/">Главная</a>
                <a href="/catalog">Каталог</a>
                <a id="admin-link" href="/admin" class="hidden">Админ-панель</a>
            </nav>
        </div>
        <div class="actions">
            <div id="auth-buttons" class="actions">
                <a href="/login" class="btn btn-secondary">Войти</a>
                <a href="/register" class="btn btn-primary">Регистрация</a>
            </div>
            <div id="user-actions" class="actions hidden">
                <button class="icon-btn"><a href="/wishlist"><span class="material-symbols-outlined">favorite</span></a></button>
                <button class="icon-btn"><a href="/orders"><span class="material-symbols-outlined">receipt_long</span></a></button>
                <button class="icon-btn cart"><a href="/cart"><span class="material-symbols-outlined">shopping_cart</span></a><div id="cart-counter" class="badge hidden">0</div></button>
                <button class="icon-btn"><a href="/profile"><span class="material-symbols-outlined">account_circle</span></a></button>
                <button class="btn btn-secondary" onclick="logout()"><span class="material-symbols-outlined">logout</span></button>
            </div>
        </div>
    </header>

    <main class="layout-container flex h-full grow flex-col">
        <div class="flex flex-1 justify-center py-5">
            <div class="layout-content-container flex flex-col w-full max-w-6xl px-4 md:px-6">

                <!-- Breadcrumbs -->
                <div class="flex flex-wrap gap-2 py-4 px-2 md:px-0" id="breadcrumbs">
                    <!-- Будет заполнено через JavaScript -->
                </div>

                <!-- Main Content: Book Details -->
                <section class="flex flex-col lg:flex-row gap-8 md:gap-10 py-6 md:py-8 px-2 md:px-0">
                    <!-- Left Column: Book Cover -->
                    <div class="flex justify-center lg:justify-start lg:sticky lg:top-24 lg:self-start">
                        <div id="bookCover" class="book-cover-main rounded-xl flex items-center justify-center text-white text-6xl font-bold overflow-hidden bg-gradient-to-br from-primary to-blue-600">
                            <!-- Буква или изображение будет добавлено через JavaScript -->
                        </div>
                    </div>

                    <!-- Right Column: Info and Actions -->
                    <div class="flex flex-col gap-6 flex-1 lg:pl-8">
                        <!-- PageHeading -->
                        <div class="flex flex-col gap-3">
                            <h1 id="bookTitle" class="text-neutral-text dark:text-neutral-text-dark text-2xl md:text-3xl lg:text-4xl font-black leading-tight tracking-tight">Загрузка...</h1>
                            <a id="bookAuthor" class="text-gray-600 dark:text-gray-300 text-lg md:text-xl font-medium leading-normal hover:text-primary-alt dark:hover:text-primary transition-colors" href="#">Автор: Unknown</a>
                        </div>

                        <!-- Chips/Genres -->
                        <div class="flex gap-3 flex-wrap" id="genresContainer">
                            <!-- Жанры будут добавлены через JavaScript -->
                        </div>

                        <!-- Rating and Price Section -->
                        <div class="flex flex-col md:flex-row md:items-center justify-between gap-4 py-4 border-t border-b border-gray-200 dark:border-gray-700">
                            <div class="flex items-center gap-3" id="ratingSection">
                                <!-- Рейтинг будет добавлен через JavaScript -->
                            </div>
                            <div>
                                <p id="bookPrice" class="text-3xl md:text-4xl font-bold text-neutral-text dark:text-neutral-text-dark">$0.00</p>
                            </div>
                        </div>

                        <!-- Description -->
                        <div class="py-4">
                            <h3 class="text-xl font-bold mb-3 text-neutral-text dark:text-neutral-text-dark">Описание</h3>
                            <p id="bookDescription" class="text-gray-700 dark:text-gray-300 text-base md:text-lg font-normal leading-relaxed">
                                Описание загружается...
                            </p>
                        </div>

                        <!-- Action Buttons -->
                        <div class="flex flex-col sm:flex-row gap-4 pt-6">
                            <button onclick="addToCart()" class="flex flex-1 cursor-pointer items-center justify-center overflow-hidden rounded-xl h-14 px-6 bg-primary text-white text-lg font-bold leading-normal tracking-[0.015em] hover:bg-primary/90 transition-all duration-300 shadow-lg hover:shadow-xl">
                                <span class="material-symbols-outlined mr-3 text-xl">add_shopping_cart</span>
                                <span class="truncate">Добавить в корзину</span>
                            </button>
                            <button onclick="toggleWishlist()" id="wishlistBtn" class="flex flex-1 cursor-pointer items-center justify-center overflow-hidden rounded-xl h-14 px-6 bg-secondary text-secondary-content text-lg font-bold leading-normal tracking-[0.015em] hover:bg-secondary/90 transition-all duration-300">
                                <span class="material-symbols-outlined mr-3 text-xl">favorite_border</span>
                                <span class="truncate">В избранное</span>
                            </button>
                        </div>
                    </div>
                </section>

                <!-- User Reviews Section -->
                <section class="py-12 px-2 md:px-0">
                    <h2 class="text-3xl font-bold mb-8 text-neutral-text dark:text-neutral-text-dark">Отзывы читателей</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="reviewsContainer">
                        <!-- Отзывы будут загружены через JavaScript -->
                    </div>
                </section>

                <!-- Recommendations Section -->
                <section class="py-12 px-2 md:px-0">
                    <div class="flex justify-between items-center mb-8">
                        <h2 class="text-3xl font-bold text-neutral-text dark:text-neutral-text-dark">Вам также может понравиться</h2>
                    </div>
                    <div class="recommendations-grid" id="recommendationsContainer">
                        <!-- Рекомендации будут загружены через JavaScript -->
                    </div>
                </section>
            </div>
        </div>
    </main>
</div>

<script src="/js/api.js"></script>
<script src="/js/utils.js"></script>
<script src="/js/main.js"></script>
<script src="/js/book.js"></script>
</body>
</html>