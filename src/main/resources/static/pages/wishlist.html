<!DOCTYPE html>
<html class="light" lang="ru">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Мои желания — BookStore</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>
    <link rel="stylesheet" href="/css/main.css"/>
    <style>
        .group:hover .group-hover-content {
          opacity: 1;
          transform: translateY(0);
        }
        .group .group-hover-content {
          opacity: 0;
          transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
          transform: translateY(10px);
        }
    </style>
</head>
<body class="font-display bg-background-light dark:bg-background-dark text-slate-800 dark:text-slate-200">
<header class="header">
    <div class="actions">
        <a class="brand" href="/">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M5 21V3h14v18l-7-3-7 3zM7 5v12.2l5-2.15 5 2.15V5H7z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg>
            <h1>BookStore</h1>
        </a>
        <nav class="nav">
            <a href="/">Главная</a>
            <a href="/catalog">Каталог</a>
            <a id="admin-link" href="/admin" class="hidden">Админ-панель</a>
        </nav>
    </div>
    <div class="actions">
        <div id="auth-buttons" class="actions">
            <a href="/login" class="btn btn-secondary">Войти</a>
            <a href="/register" class="btn btn-primary">Регистрация</a>
        </div>
        <div id="user-actions" class="actions hidden">
            <button class="icon-btn"><a href="/wishlist"><span class="material-symbols-outlined">favorite</span></a></button>
            <button class="icon-btn"><a href="/orders"><span class="material-symbols-outlined">receipt_long</span></a></button>
            <button class="icon-btn cart"><a href="/cart"><span class="material-symbols-outlined">shopping_cart</span></a><div id="cart-counter" class="badge hidden">0</div></button>
            <button class="icon-btn"><a href="/profile"><span class="material-symbols-outlined">account_circle</span></a></button>
            <button class="btn btn-secondary" onclick="logout()"><span class="material-symbols-outlined">logout</span></button>
        </div>
    </div>
</header>
<div class="layout-container max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-10 py-8 flex flex-col lg:flex-row gap-8">

    <!-- Боковая панель фильтров -->
    <aside class="w-full lg:w-64 flex-shrink-0 bg-white dark:bg-slate-800 rounded-xl p-4 shadow-md">
        <h2 class="text-lg font-bold mb-4 text-slate-900 dark:text-white">Фильтры</h2>
        <div class="flex flex-col gap-4">
            <div>
                <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1">Категория</label>
                <select id="filterCategory" class="w-full rounded-lg border border-slate-300 dark:border-slate-700 p-2 bg-white dark:bg-slate-700 text-slate-900 dark:text-white">
                    <option value="All">All</option>
                    <!-- Остальные опции будут добавлены динамически через JS -->
                </select>
            </div>
            <div>
                <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1">Диапазон цены</label>
                <input type="range" id="filterPrice" min="0" max="100" value="50" class="w-full"/>
                <div class="text-sm text-slate-600 dark:text-slate-400 mt-1">До $<span id="priceValue">50</span></div>
            </div>
            <div>
                <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1">Рейтинг</label>
                <select id="filterRating" class="w-full rounded-lg border border-slate-300 dark:border-slate-700 p-2 bg-white dark:bg-slate-700 text-slate-900 dark:text-white">
                    <option value="0">All</option>
                    <option value="1">1 ★ & up</option>
                    <option value="2">2 ★ & up</option>
                    <option value="3">3 ★ & up</option>
                    <option value="4">4 ★ & up</option>
                    <option value="5">5 ★</option>
                </select>
            </div>
        </div>
    </aside>

    <!-- Основной контейнер с книгами -->
    <main class="flex-1">
        <!-- Заголовок и кнопки -->
        <div class="flex flex-wrap justify-between items-center gap-4 mb-6">
            <h1 class="text-slate-900 dark:text-white text-4xl font-black leading-tight tracking-[-0.033em]">Мои желания</h1>
           <div class="flex gap-2">
                <div class="relative">
                    <button id="shareMainBtn" class="flex items-center justify-center gap-2 h-10 px-4 rounded-lg bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-700 text-sm font-bold border border-slate-200 dark:border-slate-700">
                        <span class="material-symbols-outlined text-lg">ios_share</span> Поделиться
                    </button>
                    
                    <!-- Выпадающее меню -->
                    <div id="shareMenu" class="share-dropdown hidden">
                        <div class="share-dropdown-header">
                            <h3>Поделиться вишлистом</h3>
                        </div>
                        
                        <div class="share-options">
                            <button id="shareVK" class="share-option">
                                <div class="share-option-left">
                                    <div class="share-platform-icon share-platform-vk">VK</div>
                                    <span class="share-option-text">ВКонтакте</span>
                                </div>
                                <div class="share-option-right">
                                    <span class="material-symbols-outlined text-lg">open_in_new</span>
                                </div>
                            </button>
                            
                            <button id="shareTelegram" class="share-option">
                                <div class="share-option-left">
                                    <div class="share-platform-icon share-platform-telegram">TG</div>
                                    <span class="share-option-text">Telegram</span>
                                </div>
                                <div class="share-option-right">
                                    <span class="material-symbols-outlined text-lg">open_in_new</span>
                                </div>
                            </button>
                            
                            <div class="share-divider"></div>
                            
                            <button id="copyLink" class="share-option">
                                <div class="share-option-left">
                                    <div class="share-platform-icon share-platform-copy">
                                        <span class="material-symbols-outlined">link</span>
                                    </div>
                                    <span class="share-option-text">Скопировать ссылку</span>
                                </div>
                                <div class="share-option-right">
                                    <span class="material-symbols-outlined text-lg">content_copy</span>
                                </div>
                            </button>
                        </div>
                    </div>
                </div>
                
                <button id="moveAllBtn" class="flex items-center justify-center gap-2 h-10 px-4 rounded-lg bg-primary/20 text-primary hover:bg-primary/30 text-sm font-bold">
                    <span class="material-symbols-outlined text-lg">shopping_cart</span> Перенести всё в корзину
                </button>
            </div>
        </div>

        <!-- Контейнер для карточек книг -->
        <div id="wishlistContainer" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
            <!-- JS динамически добавляет книги сюда -->
        </div>

        <!-- Пагинация -->
        <div id="paginationContainer" class="hidden flex items-center justify-between p-4 mt-8 border-t border-slate-200 dark:border-slate-700">
            <span class="text-sm text-slate-600 dark:text-slate-400">Показано <span class="font-semibold text-slate-900 dark:text-white" id="showingRange">1-0</span> из <span class="font-semibold text-slate-900 dark:text-white" id="totalBooks">0</span></span>
            <div class="flex items-center gap-2" id="paginationButtons"></div>
        </div>
    </main>

</div>
<script src="/js/api.js"></script>
<script src="/js/utils.js"></script>
<script src="/js/main.js"></script>
<script src="/js/wishlist.js"></script>
</body>
</html>
